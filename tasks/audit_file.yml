---
# Main Audit Task File
# This file orchestrates the audit process by including specialized task files.

- name: Reset Loop Variables
  set_fact:
    drift_detected: false
    drift_type: "none"
    should_fix: false
    local_ref_stat: {}
    remote_file_stat: {}
    diff_output: {}

- name: Detect Drift
  include_tasks: tasks/detect_drift.yml

- name: Generate Diff (if needed)
  include_tasks: tasks/generate_diff.yml

- name: Display Results
  include_tasks: tasks/display_results.yml

- name: Remediate Drift (if requested)
  include_tasks: tasks/remediate_drift.yml

- name: Log Results
  include_tasks: tasks/log_results.yml

